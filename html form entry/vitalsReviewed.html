<htmlform formUuid="a000cb34-9ec1-4344-a1c8-f692232f6edd" formName="Vitals" formEncounterType="67a71486-1a54-468f-ac3e-7091a9a79584" formVersion="1.0">

    <!-- only show BMI if patient is more than 5 years old (on the encounterDate) -->
    <includeIf velocityTest="$patient.getAge($encounter.getEncounterDatetime()) > 5">

        <ifMode mode="ENTER">
            <script type="text/javascript">        
                jq(function() {
				    jq('#bp_systolic input[type=text]').attr('min', '50');
				});
				
				jq(function() {
				    jq('#bp_diastolic input[type=text]').attr('min', '30');
				});
            </script>
        </ifMode>

        <script>
            // set the blood pressure fields as "expected"
            jq(function() {
                jq('#bp_systolic > input').addClass('expected');
                jq('#bp_diastolic > input').addClass('expected');
            });
        </script>

    </includeIf>

    <div class="hidden" id="encounter-details" sectionTag="section" headerStyle="title" headerLabel="Encounter Details">
        <fieldset>
            <legend>When?</legend>
            <label>When?</label>

            <encounterDate default="now" showTime="false"/>
        </fieldset>

        <fieldset>
            <legend>Who?</legend>
            <label>Who?</label>

            <encounterProviderAndRole default="currentUser" encounterRole="240b26f9-dd88-4172-823d-4a8bfeb7841f" required="true"/>
        </fieldset>

        <fieldset>
            <legend>Where?</legend>
            <label>Where?</label>

            <encounterLocation default="SessionAttribute:emrContext.sessionLocationId"/>
        </fieldset>
    </div>

    <section id="vitals" sectionTag="section" headerStyle="title" headerCode="referenceapplication.vitals.title">

  
            <h3><lookup expression="fn.getConcept('CIEL:5088').name"/></h3>
            <p class="left">
                <obs conceptId="CIEL:5088" id="temperature" showUnits="uicommons.units.degreesCelsius" unitsCssClass="append-to-value"/>
            </p>
            <h3><lookup expression="fn.getConcept('CIEL:5087').name"/></h3>

            <p>
                <obs conceptId="CIEL:5087" id="heart_rate" showUnits="uicommons.units.perMinute" unitsCssClass="append-to-value"/>
            </p>

            <h3><lookup expression="fn.getConcept('CIEL:5242').name"/></h3>

            <p>
                <obs conceptId="CIEL:5242" id="respiratory_rate" showUnits="uicommons.units.perMinute" unitsCssClass="append-to-value"/>
            </p>

            <h3><uimessage code="referenceapplication.vitals.bloodPressure.title"/></h3>

            <p class="left">
                <obs conceptId="CIEL:5085" id="bp_systolic"/>
            </p>
            <p class="left">
                /
            </p>
            <p class="left">
                <obs conceptId="CIEL:5086" id="bp_diastolic"/>
            </p>

            <h3><lookup expression="fn.getConcept('CIEL:5092').name"/></h3>

            <p>
                <obs conceptId="CIEL:5092" id="o2_sat" showUnits="uicommons.units.percent" unitsCssClass="append-to-value"/>
            </p>


        <!-- only show BMI if patient is less than 13 years old (on the encounterDate) -->
        <includeIf velocityTest="13 > $patient.getAge($encounter.getEncounterDatetime())">
                <h3><lookup expression="fn.getConcept('CIEL:1343').name"/></h3>
                <p>
                    <obs conceptId="CIEL:1343" id="muac" showUnits="uicommons.units.millimeters" unitsCssClass="append-to-value"/>
                </p>
        </includeIf>


    </section>

    <submit/>

</htmlform>